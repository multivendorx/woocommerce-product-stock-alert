"use strict";jQuery(function(e){var i={init:function(){e(document).on("click",".stock_alert_button",this.subscribe_form),e(document).on("click",".unsubscribe_button",this.unsubscribe_form),e(".single_variation_wrap").on("show_variation",this.perform_upon_show_variation)},perform_upon_show_variation:function(i,s){var t=s.variation_id;e(".stock_notifier-subscribe-form").hide(),e(".stock_notifier-subscribe-form-"+t).show()},is_email:function(e){return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},unsubscribe_form:function(i){i.preventDefault(),e(this).text(woo_stock_alert_script_data.processing),e(this).addClass("stk_disabled");var s=e(this).closest(".stock_notifier-subscribe-form"),t={action:"unsubscribe_button",customer_email:s.find(".subscribed_email").val(),product_id:s.find(".product_id").val(),var_id:s.find(".variation_id").val()},r=woo_stock_alert_script_data.alert_unsubscribe_message;r=r.replace("%customer_email%",t.customer_email),e.post(woo_stock_alert_script_data.ajax_url,t,function(i){e(this).removeClass("stk_disabled"),!0==i?e(".stock_notifier-subscribe-form").html('<div class="registered_message">'+r+"</div>"):e(".stock_notifier-subscribe-form").html('<div class="registered_message">'+woo_stock_alert_script_data.error_occurs+'<a href="'+window.location+'"> '+woo_stock_alert_script_data.try_again+"</a></div>")})},subscribe_form:function(s){s.preventDefault(),e(this).text(woo_stock_alert_script_data.processing),e(this).addClass("stk_disabled");var t=woo_stock_alert_script_data.recaptcha_enabled,r=e(this).closest(".stock_notifier-subscribe-form");if(t){var a=r.find("#recaptchav3_secretkey").val(),o=r.find("#recaptchav3_response").val();e.post(woo_stock_alert_script_data.ajax_url,{action:"recaptcha_validate_ajax",captcha_secret:a,captcha_response:o},function(s){1==s?i.process_form(r.find(".stock_alert_email").val(),r.find(".current_product_id").val(),r.find(".current_variation_id").val(),r.find(".current_product_name").val()):(alert("Oops, recaptcha not varified!"),e(this).removeClass("stk_disabled"))})}else i.process_form(r.find(".stock_alert_email").val(),r.find(".current_product_id").val(),r.find(".current_variation_id").val(),r.find(".current_product_name").val())},process_form:function(s,t,r,a){var o=woo_stock_alert_script_data.alert_text_html,c=woo_stock_alert_script_data.button_html,n=woo_stock_alert_script_data.alert_success,l=woo_stock_alert_script_data.alert_email_exist,d=woo_stock_alert_script_data.valid_email,u=woo_stock_alert_script_data.ban_email_domain_text,p=woo_stock_alert_script_data.ban_email_address_text,m=woo_stock_alert_script_data.double_opt_in_success,v=woo_stock_alert_script_data.unsubscribe_button,f=woo_stock_alert_script_data.alert_fields,n=n.replace("%product_title%",a),n=n.replace("%customer_email%",s),l=l.replace("%product_title%",a),l=l.replace("%customer_email%",s);if(s&&i.is_email(s)){e(this).toggleClass("alert_loader").blur();for(var b={action:"alert_ajax",email:s,product_id:t,variation_id:r},h=0;h<woo_stock_alert_script_data.additional_fields.length;h++)b[woo_stock_alert_script_data.additional_fields[h]]=e(this).parent().find("."+woo_stock_alert_script_data.additional_fields[h]).val();e.post(woo_stock_alert_script_data.ajax_url,b,function(i){"0"==i?e(".stock_notifier-subscribe-form").html('<div class="registered_message">'+woo_stock_alert_script_data.error_occurs+'<a href="'+window.location+'"> '+woo_stock_alert_script_data.try_again+"</a></div>"):"/*?%already_registered%?*/"==i?e(".stock_notifier-subscribe-form").html('<div class="registered_message">'+l+"</div>"+v+'<input type="hidden" class="subscribed_email" value="'+s+'" /><input type="hidden" class="product_id" value="'+t+'" /><input type="hidden" class="variation_id" value="'+r+'" />'):"/*?%ban_email_address%?*/"==i?e(".stock_notifier-subscribe-form").html(o+'<div class="woo_fields_wrap">'+f+c+'</div><p class="stock_alert_error_message ban_email_address">'+p+'</p><input type="hidden" class="current_product_id" value="'+t+'" /> <input type="hidden" class="current_variation_id" value="'+r+'" /><input type="hidden" class="current_product_name" value="'+a+'" />'):"/*?%ban_email_domain%?*/"==i?e(".stock_notifier-subscribe-form").html(o+'<div class="woo_fields_wrap">'+f+c+'</div><p class="stock_alert_error_message ban_email_domin">'+u+'</p><input type="hidden" class="current_product_id" value="'+t+'" /> <input type="hidden" class="current_variation_id" value="'+r+'" /><input type="hidden" class="current_product_name" value="'+a+'" />'):"/*?%double_opt_in%?*/"==i?e(".stock_notifier-subscribe-form").html('<div class="registered_message">'+m+"</div>"):e(".stock_notifier-subscribe-form").html('<div class="registered_message">'+n+"</div>")})}else e(".stock_notifier-subscribe-form").html(o+'<div class="woo_fields_wrap">'+f+c+'</div><p style="color:#e2401c;" class="stock_alert_error_message">'+d+'</p><input type="hidden" class="current_product_id" value="'+t+'" /> <input type="hidden" class="current_variation_id" value="'+r+'" /><input type="hidden" class="current_product_name" value="'+a+'" />');e(this).removeClass("stk_disabled")}};i.init()});